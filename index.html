<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro y Chistes</title>
</head>
<body>

    <h1>Registro de Usuario</h1>

    <form action="confirmacion.html" method="get"> 
        
        <div>
            <label for="nombre">Nombre Completo:</label>
            <input type="text" id="nombre" name="nombre" required>
        </div>
        
        <br>

        <div>
            <label for="edad">Edad:</label>
            <input type="number" id="edad" name="edad" min="1" max="120" required>
        </div>

        <br>

        <div>
            <label for="email">Correo Electr贸nico (Gmail):</label>
            <input type="email" id="email" name="email" pattern="[a-zA-Z0-9._%+-]+@gmail\.com$" title="Por favor, introduce una direcci贸n de Gmail v谩lida" required>
        </div>

        <br>

        <div>
            <button type="submit">Enviar Registro</button>
        </div>

    </form>

    <hr>

    <h2>ぃ 驴Necesitas un descanso?</h2>
    
    <button id="obtenerChisteBtn">Dame un Chiste de Programaci贸n</button>
    
    <p id="chiste" style="margin-top: 15px; font-style: italic;">Haz clic en el bot贸n para ver un chiste...</p>

    <script>
        // 1. Obtener los elementos HTML que vamos a manipular
        const botonChiste = document.getElementById('obtenerChisteBtn');
        const parrafoChiste = document.getElementById('chiste');

        // 2. Funci贸n as铆ncrona para obtener el chiste
        async function obtenerChiste() {
            // Muestra un mensaje de carga mientras espera la respuesta
            parrafoChiste.textContent = "Cargando chiste...";
            
            // URL de la API de chistes de programaci贸n
            const API_URL = 'https://v2.jokeapi.dev/joke/Programming?blacklistFlags=nsfw,religious,political,racist,sexist,explicit&type=single';

            try {
                // Realiza la solicitud a la API
                const respuesta = await fetch(API_URL);
                
                // Convierte la respuesta a formato JSON
                const datos = await respuesta.json();

                // Verifica si la llamada fue exitosa y tiene un chiste
                if (datos.error) {
                    parrafoChiste.textContent = "Error al cargar el chiste. Intenta de nuevo.";
                } else {
                    // Muestra el chiste en el p谩rrafo
                    parrafoChiste.textContent = datos.joke;
                }
            } catch (error) {
                // Maneja cualquier error de red o de la API
                parrafoChiste.textContent = "Lo siento, ocurri贸 un error de conexi贸n: " + error.message;
            }
        }

        // 3. Agregar un "escuchador de eventos" al bot贸n
        botonChiste.addEventListener('click', obtenerChiste);
    </script>

</body>
</html>
